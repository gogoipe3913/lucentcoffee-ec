/* =========================================
   Lucent Reveal (merged transform)
   - reveal transform + magnetic offset
   ========================================= */

.lucent-reveal {
  /* reveal */
  --reveal-x: 0px;
  --reveal-y: 14px;
  --reveal-scale: 0.985;

  /* magnetic (JS updates) */
  --mx: 0px;
  --my: 0px;

  opacity: 0;
  transform: translate3d(
      calc(var(--reveal-x) + var(--mx)),
      calc(var(--reveal-y) + var(--my)),
      0
    )
    scale(var(--reveal-scale));
  filter: blur(14px);
  will-change: opacity, transform, filter;
  transition:
    opacity 700ms ease,
    transform 900ms cubic-bezier(0.2, 0.8, 0.2, 1),
    filter 900ms ease;
  transition-delay: var(--lucent-delay, 0ms);
}

.lucent-reveal.is-revealed {
  opacity: 1;
  --reveal-x: 0px;
  --reveal-y: 0px;
  --reveal-scale: 1;
  filter: blur(0px);
}

/* Mobile */
@media (max-width: 749px) {
  .lucent-reveal {
    filter: blur(10px);
    --reveal-y: 10px;
    --reveal-scale: 0.992;
  }
}

/* Reduce motion */
@media (prefers-reduced-motion: reduce) {
  .lucent-reveal {
    opacity: 1 !important;
    transform: none !important;
    filter: none !important;
    transition: none !important;
  }
}

/* FIX: reveal後も magnetic を有効にする（旧CSSの transform 固定を無効化） */
.lucent-reveal.is-revealed {
  transform: translate3d(
      calc(var(--reveal-x) + var(--mx)),
      calc(var(--reveal-y) + var(--my)),
      0
    )
    scale(var(--reveal-scale));
}
