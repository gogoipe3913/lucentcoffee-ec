{{ 'component-contact.css' | asset_url | stylesheet_tag }}

{%- style -%}
  .section-{{ section.id }}-padding {
    padding-top: {{ section.settings.padding_top | times: 0.75 | round: 0 }}px;
    padding-bottom: {{ section.settings.padding_bottom | times: 0.75 | round: 0 }}px;
  }

  @media screen and (min-width: 750px) {
    .section-{{ section.id }}-padding {
      padding-top: {{ section.settings.padding_top }}px;
      padding-bottom: {{ section.settings.padding_bottom }}px;
    }
  }
{%- endstyle -%}

<div class="lc-contact color-{{ section.settings.color_scheme }} gradient">
  <div class="page-width section-{{ section.id }}-padding">
    <div class="lc-contact__grid">
      <div class="lc-contact__title">
        <h1 class="lc-contact__heading">Contact</h1>
      </div>

      <div class="lc-contact__form">
        {%- form 'contact', id: 'ContactForm', class: 'lc-contact__form-inner' -%}
          {%- if form.posted_successfully? -%}
            <p class="lc-contact__notice" role="status">{{ 'templates.contact.form.post_success' | t }}</p>
          {%- endif -%}

          {%- if form.errors -%}
            <div class="lc-contact__errors" role="alert">
              <p class="lc-contact__errors-title">
                {{ 'templates.contact.form.error_heading' | t }}
              </p>
              <ul class="lc-contact__errors-list">
                {%- for field in form.errors -%}
                  <li>
                    {%- if field == 'form' -%}
                      {{ form.errors.messages[field] }}
                    {%- else -%}
                      {{ form.errors.translated_fields[field] }} {{ form.errors.messages[field] }}
                    {%- endif -%}
                  </li>
                {%- endfor -%}
              </ul>
            </div>
          {%- endif -%}

          {%- comment -%} hiddenの contact[name] に 姓+名 を詰める {%- endcomment -%}
          <input type="hidden" name="contact[name]" id="LcContactName" value="" />

          <div class="lc-field">
            <label class="lc-label" for="LcLastName">お名前 <span class="lc-required">*</span></label>
            <div class="lc-name">
              <input
                class="lc-input"
                type="text"
                id="LcLastName"
                name="contact[last_name]"
                autocomplete="family-name"
                placeholder="中田"
                required
              >
              <input
                class="lc-input"
                type="text"
                id="LcFirstName"
                name="contact[first_name]"
                autocomplete="given-name"
                placeholder="真"
                required
              >
            </div>
          </div>

          <div class="lc-field">
            <label class="lc-label" for="LcEmail">メールアドレス <span class="lc-required">*</span></label>
            <input
              class="lc-input"
              type="email"
              id="LcEmail"
              name="contact[email]"
              autocomplete="email"
              placeholder="lucent@gmail.com"
              required
              {% if form.email %}value="{{ form.email }}"{% endif %}
            >
          </div>

          <div class="lc-field">
            <label class="lc-label" for="LcPhone">電話番号 <span class="lc-required">*</span></label>
            <input
              class="lc-input"
              type="tel"
              id="LcPhone"
              name="contact[phone]"
              autocomplete="tel"
              placeholder="090-0000-9999"
              required
              {% if form.phone %}value="{{ form.phone }}"{% endif %}
            >
          </div>

          <div class="lc-field">
            <label class="lc-label" for="LcBody">お問い合わせ内容 <span class="lc-required">*</span></label>
            <textarea
              class="lc-textarea"
              id="LcBody"
              name="contact[body]"
              rows="10"
              placeholder="メッセージ"
              required
            >{% if form.body %}{{ form.body }}{% endif %}</textarea>
          </div>

          <div class="lc-actions">
            <button type="submit" class="lc-submit">
              送　信
            </button>
          </div>

          <script>
            (function () {
              var form = document.getElementById('ContactForm');
              if (!form) return;

              form.addEventListener('submit', function () {
                var last = document.getElementById('LcLastName');
                var first = document.getElementById('LcFirstName');
                var full = document.getElementById('LcContactName');

                if (!full) return;

                var vLast = (last && last.value ? last.value : '').trim();
                var vFirst = (first && first.value ? first.value : '').trim();

                full.value = (vLast + ' ' + vFirst).trim();
              });
            })();
          </script>
        {%- endform -%}
      </div>
    </div>
  </div>
</div>

{% schema %}
{
  "name": "Contact form",
  "tag": "section",
  "class": "section",
  "settings": [
    {
      "type": "text",
      "id": "heading",
      "default": "",
      "label": "Heading"
    },
    {
      "type": "select",
      "id": "heading_size",
      "options": [
        { "value": "h2", "label": "Small" },
        { "value": "h1", "label": "Medium" },
        { "value": "h0", "label": "Large" }
      ],
      "default": "h1",
      "label": "Heading size"
    },
    {
      "type": "select",
      "id": "color_scheme",
      "options": [
        { "value": "scheme-1", "label": "Scheme 1" },
        { "value": "scheme-2", "label": "Scheme 2" },
        { "value": "scheme-3", "label": "Scheme 3" },
        { "value": "scheme-4", "label": "Scheme 4" },
        { "value": "scheme-5", "label": "Scheme 5" }
      ],
      "default": "scheme-1",
      "label": "Color scheme"
    },
    {
      "type": "range",
      "id": "padding_top",
      "min": 0,
      "max": 100,
      "step": 4,
      "unit": "px",
      "label": "Padding top",
      "default": 36
    },
    {
      "type": "range",
      "id": "padding_bottom",
      "min": 0,
      "max": 120,
      "step": 4,
      "unit": "px",
      "label": "Padding bottom",
      "default": 36
    }
  ],
  "presets": [
    { "name": "Contact form" }
  ]
}
{% endschema %}
